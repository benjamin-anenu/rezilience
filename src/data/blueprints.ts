export interface BlueprintStep {
  id: string;
  title: string;
  description: string;
  language?: string;
  alternatives?: string[];
  tools: string[];
  dependencies: string[];
  apis?: string[];
  estimatedCost?: string;
  docsUrl?: string;
  dictionaryTerms?: string[];
  protocolSlugs?: string[];
}

export interface Blueprint {
  slug: string;
  title: string;
  description: string;
  complexity: 'Medium' | 'Advanced';
  steps: BlueprintStep[];
}

export const blueprints: Blueprint[] = [
  {
    slug: 'wallet',
    title: 'Build a Solana Wallet',
    description: 'Transaction signing, balance display, token list, and swap integration.',
    complexity: 'Medium',
    steps: [
      {
        id: 'wallet-env',
        title: 'Environment Setup',
        description: 'Install Solana CLI, set up a TypeScript project with React and configure devnet.',
        language: 'TypeScript',
        alternatives: ['Rust'],
        tools: ['Solana CLI', 'Node.js', 'Vite'],
        dependencies: ['@solana/web3.js', 'react', 'typescript'],
        estimatedCost: 'Free',
        docsUrl: 'https://docs.solana.com/cli/install-solana-cli-tools',
        dictionaryTerms: ['rpc', 'cluster'],
      },
      {
        id: 'wallet-keypair',
        title: 'Key Management',
        description: 'Generate and securely store keypairs. Implement seed phrase derivation and wallet import/export.',
        language: 'TypeScript',
        tools: ['BIP39', 'ed25519-hd-key'],
        dependencies: ['@solana/web3.js', 'bip39', 'tweetnacl'],
        dictionaryTerms: ['keypair', 'seed-phrase'],
      },
      {
        id: 'wallet-adapter',
        title: 'Wallet Adapter Integration',
        description: 'Connect to Phantom, Solflare, and other wallets using the standard adapter.',
        language: 'TypeScript',
        tools: ['Wallet Adapter'],
        dependencies: ['@solana/wallet-adapter-react', '@solana/wallet-adapter-react-ui', '@solana/wallet-adapter-wallets'],
        docsUrl: 'https://github.com/solana-labs/wallet-adapter',
        protocolSlugs: ['solana-wallet-adapter'],
      },
      {
        id: 'wallet-balance',
        title: 'Balance & Token Display',
        description: 'Fetch SOL balance and SPL token accounts. Display token metadata and prices.',
        language: 'TypeScript',
        tools: ['Helius DAS API', 'Jupiter Price API'],
        dependencies: ['@solana/spl-token'],
        apis: ['Helius RPC', 'Jupiter Price API v2'],
        estimatedCost: 'Free tier / $49+/mo for production',
        protocolSlugs: ['helius', 'jupiter'],
        dictionaryTerms: ['spl-token', 'ata'],
      },
      {
        id: 'wallet-swap',
        title: 'Swap Integration',
        description: 'Embed Jupiter swap widget or build custom swap UI using the Jupiter API.',
        language: 'TypeScript',
        tools: ['Jupiter Terminal', 'Jupiter API'],
        dependencies: ['@jup-ag/terminal'],
        apis: ['Jupiter Quote API', 'Jupiter Swap API'],
        estimatedCost: 'Free (Jupiter charges no fees)',
        protocolSlugs: ['jupiter'],
        dictionaryTerms: ['amm', 'slippage'],
      },
    ],
  },
  {
    slug: 'defi-protocol',
    title: 'Build a DeFi Protocol',
    description: 'DEX or lending protocol with liquidity pools, oracles, and governance.',
    complexity: 'Advanced',
    steps: [
      {
        id: 'defi-env',
        title: 'Environment Setup',
        description: 'Set up Anchor framework, configure Rust toolchain, and initialize the project workspace.',
        language: 'Rust',
        alternatives: ['TypeScript (Seahorse)'],
        tools: ['Anchor', 'Solana CLI', 'Rust'],
        dependencies: ['anchor-lang', 'anchor-spl', 'solana-program'],
        estimatedCost: 'Free',
        docsUrl: 'https://www.anchor-lang.com/docs/installation',
        protocolSlugs: ['anchor'],
        dictionaryTerms: ['anchor', 'idl'],
      },
      {
        id: 'defi-program',
        title: 'Core Program Logic',
        description: 'Implement liquidity pool accounts, deposit/withdraw instructions, and fee calculations.',
        language: 'Rust',
        tools: ['Anchor'],
        dependencies: ['anchor-lang', 'anchor-spl', 'solana-program'],
        dictionaryTerms: ['pda', 'cpi', 'spl-token'],
      },
      {
        id: 'defi-oracle',
        title: 'Oracle Integration',
        description: 'Integrate Pyth or Switchboard for real-time price feeds. Handle staleness and confidence intervals.',
        language: 'Rust',
        tools: ['Pyth SDK', 'Switchboard'],
        dependencies: ['pyth-solana-receiver-sdk'],
        apis: ['Pyth Price Feeds', 'Switchboard Oracle'],
        estimatedCost: 'Free (on-chain reads)',
        protocolSlugs: ['pyth', 'switchboard'],
        dictionaryTerms: ['oracle'],
      },
      {
        id: 'defi-math',
        title: 'AMM Math & Pricing',
        description: 'Implement constant product (x*y=k) or concentrated liquidity math. Handle decimal precision.',
        language: 'Rust',
        tools: ['Anchor'],
        dependencies: ['anchor-lang', 'uint', 'spl-math'],
        dictionaryTerms: ['amm', 'slippage', 'impermanent-loss'],
      },
      {
        id: 'defi-security',
        title: 'Security Audit Prep',
        description: 'Add reentrancy guards, signer checks, overflow protection. Prepare for third-party audit.',
        language: 'Rust',
        tools: ['Soteria', 'Sec3'],
        dependencies: ['anchor-lang'],
        estimatedCost: '$15k–$100k+ for formal audit',
        dictionaryTerms: ['reentrancy', 'signer-check'],
      },
      {
        id: 'defi-frontend',
        title: 'Frontend & SDK',
        description: 'Build trading UI with charts, position management, and transaction signing.',
        language: 'TypeScript',
        tools: ['React', 'TradingView'],
        dependencies: ['@solana/web3.js', '@coral-xyz/anchor', 'react'],
        apis: ['Helius RPC', 'Birdeye API'],
        estimatedCost: 'Free tier / $49+/mo',
        protocolSlugs: ['helius'],
      },
      {
        id: 'defi-governance',
        title: 'Governance & Tokenomics',
        description: 'Launch governance token, implement DAO voting using SPL Governance or Realms.',
        language: 'TypeScript',
        tools: ['Realms', 'SPL Governance'],
        dependencies: ['@solana/spl-governance'],
        protocolSlugs: ['realms'],
        dictionaryTerms: ['dao', 'governance-token'],
      },
    ],
  },
  {
    slug: 'nft-marketplace',
    title: 'Build an NFT Marketplace',
    description: 'Minting, listing, bidding, and royalty enforcement for digital assets.',
    complexity: 'Medium',
    steps: [
      {
        id: 'nft-env',
        title: 'Environment Setup',
        description: 'Configure Metaplex SDK, set up TypeScript project, and connect to devnet.',
        language: 'TypeScript',
        alternatives: ['Rust'],
        tools: ['Metaplex Umi', 'Solana CLI'],
        dependencies: ['@metaplex-foundation/umi', '@metaplex-foundation/mpl-token-metadata'],
        estimatedCost: 'Free',
        protocolSlugs: ['metaplex'],
        dictionaryTerms: ['nft', 'metadata'],
      },
      {
        id: 'nft-minting',
        title: 'Minting Engine',
        description: 'Create NFTs with metadata, images on Arweave/IPFS, and collection grouping.',
        language: 'TypeScript',
        tools: ['Metaplex Umi', 'Irys (Bundlr)'],
        dependencies: ['@metaplex-foundation/umi', '@irys/sdk'],
        apis: ['Irys Upload', 'Arweave'],
        estimatedCost: '~$0.001–$0.05 per upload',
        protocolSlugs: ['metaplex'],
        dictionaryTerms: ['nft', 'arweave', 'metadata'],
      },
      {
        id: 'nft-listing',
        title: 'Listing & Escrow',
        description: 'Build listing program with escrow accounts, price setting, and delisting.',
        language: 'Rust',
        tools: ['Anchor'],
        dependencies: ['anchor-lang', 'anchor-spl'],
        protocolSlugs: ['anchor'],
        dictionaryTerms: ['pda', 'escrow'],
      },
      {
        id: 'nft-bidding',
        title: 'Bidding & Auction',
        description: 'Implement English auction, instant buy, and offer/counter-offer mechanics.',
        language: 'Rust',
        tools: ['Anchor'],
        dependencies: ['anchor-lang', 'anchor-spl'],
        dictionaryTerms: ['cpi'],
      },
      {
        id: 'nft-royalties',
        title: 'Royalty Enforcement',
        description: 'Use Token Extensions or Metaplex pNFTs for enforced creator royalties on secondary sales.',
        language: 'TypeScript',
        tools: ['Metaplex', 'Token Extensions'],
        dependencies: ['@metaplex-foundation/mpl-token-metadata', '@solana/spl-token'],
        dictionaryTerms: ['royalty', 'token-extensions'],
      },
      {
        id: 'nft-frontend',
        title: 'Marketplace Frontend',
        description: 'Gallery grid, search/filter, wallet connect, and transaction flow UI.',
        language: 'TypeScript',
        tools: ['React', 'Helius DAS API'],
        dependencies: ['react', '@solana/wallet-adapter-react'],
        apis: ['Helius DAS API', 'SimpleHash'],
        estimatedCost: 'Free tier / $49+/mo',
        protocolSlugs: ['helius'],
      },
    ],
  },
  {
    slug: 'depin-node',
    title: 'Build a DePIN Node',
    description: 'Physical infrastructure coordination with on-chain rewards and verification.',
    complexity: 'Advanced',
    steps: [
      {
        id: 'depin-env',
        title: 'Environment Setup',
        description: 'Set up Rust/Anchor for on-chain program, Node.js for off-chain oracle, and hardware SDK.',
        language: 'Rust',
        alternatives: ['TypeScript', 'Go'],
        tools: ['Anchor', 'Solana CLI', 'Docker'],
        dependencies: ['anchor-lang', 'solana-program'],
        estimatedCost: 'Free (+ hardware costs)',
        protocolSlugs: ['anchor'],
        dictionaryTerms: ['depin'],
      },
      {
        id: 'depin-registry',
        title: 'Node Registry Program',
        description: 'On-chain registry for node operators with staking, metadata, and geolocation.',
        language: 'Rust',
        tools: ['Anchor'],
        dependencies: ['anchor-lang', 'anchor-spl'],
        dictionaryTerms: ['pda', 'staking'],
      },
      {
        id: 'depin-oracle',
        title: 'Off-Chain Oracle',
        description: 'Service that reads hardware metrics and posts proofs on-chain via Clockwork or cron.',
        language: 'TypeScript',
        alternatives: ['Go', 'Rust'],
        tools: ['Clockwork', 'Node.js'],
        dependencies: ['@solana/web3.js', '@clockwork-xyz/sdk'],
        apis: ['Custom hardware API'],
        dictionaryTerms: ['oracle', 'clockwork'],
      },
      {
        id: 'depin-rewards',
        title: 'Reward Distribution',
        description: 'Token minting and distribution based on verified uptime and contribution proofs.',
        language: 'Rust',
        tools: ['Anchor', 'SPL Token'],
        dependencies: ['anchor-lang', 'anchor-spl', 'spl-token'],
        dictionaryTerms: ['spl-token', 'token-extensions'],
      },
      {
        id: 'depin-verification',
        title: 'Proof of Contribution',
        description: 'Implement verification logic — bandwidth tests, storage proofs, or compute benchmarks.',
        language: 'Rust',
        alternatives: ['TypeScript'],
        tools: ['Custom verifiers'],
        dependencies: ['anchor-lang'],
        dictionaryTerms: ['proof-of-history'],
      },
      {
        id: 'depin-dashboard',
        title: 'Operator Dashboard',
        description: 'Real-time dashboard showing node status, rewards earned, network health, and staking.',
        language: 'TypeScript',
        tools: ['React', 'Recharts'],
        dependencies: ['react', '@solana/web3.js', 'recharts'],
        apis: ['Helius RPC', 'Custom indexer'],
        estimatedCost: 'Free tier / $49+/mo',
        protocolSlugs: ['helius'],
      },
    ],
  },
  {
    slug: 'dao',
    title: 'Build a DAO',
    description: 'Governance system with proposals, voting, treasury management, and delegation.',
    complexity: 'Medium',
    steps: [
      {
        id: 'dao-env',
        title: 'Environment Setup',
        description: 'Set up SPL Governance or Realms SDK. Configure governance program and council.',
        language: 'TypeScript',
        alternatives: ['Rust'],
        tools: ['Realms', 'SPL Governance', 'Solana CLI'],
        dependencies: ['@solana/spl-governance', '@solana/web3.js'],
        estimatedCost: 'Free',
        protocolSlugs: ['realms'],
        dictionaryTerms: ['dao', 'governance-token'],
      },
      {
        id: 'dao-token',
        title: 'Governance Token',
        description: 'Create and distribute governance token with vesting schedules and delegation.',
        language: 'TypeScript',
        tools: ['SPL Token', 'Streamflow'],
        dependencies: ['@solana/spl-token'],
        dictionaryTerms: ['spl-token', 'governance-token'],
      },
      {
        id: 'dao-proposals',
        title: 'Proposal System',
        description: 'Create, vote on, and execute governance proposals with configurable quorum and thresholds.',
        language: 'TypeScript',
        tools: ['Realms SDK'],
        dependencies: ['@solana/spl-governance'],
        protocolSlugs: ['realms'],
        dictionaryTerms: ['dao'],
      },
      {
        id: 'dao-treasury',
        title: 'Treasury Management',
        description: 'Multi-sig treasury with spending proposals, budget tracking, and automated distributions.',
        language: 'TypeScript',
        tools: ['Squads', 'Realms'],
        dependencies: ['@sqds/multisig', '@solana/spl-governance'],
        protocolSlugs: ['squads'],
        dictionaryTerms: ['multisig'],
      },
      {
        id: 'dao-frontend',
        title: 'Governance Frontend',
        description: 'Proposal listing, voting UI, delegation dashboard, and treasury overview.',
        language: 'TypeScript',
        tools: ['React', 'Wallet Adapter'],
        dependencies: ['react', '@solana/wallet-adapter-react'],
        apis: ['Helius RPC'],
        estimatedCost: 'Free tier / $49+/mo',
        protocolSlugs: ['helius'],
      },
    ],
  },
];

export function getBlueprintBySlug(slug: string): Blueprint | undefined {
  return blueprints.find((b) => b.slug === slug);
}
